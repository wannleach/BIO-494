---
title: "Module 1"
author: "Willow Leach"
date: "2023-03-16"
output: html_document
---
   
## Data Visualization Notes

This is a starter RMarkdown template to accompany *Data Visualization* (Princeton University Press, 2019). You can use it to take notes, write your code, and produce a good-looking, reproducible document that records the work you have done. At the very top of the file is a section of *metadata*, or information about what the file is and what it does. The metadata is delimited by three dashes at the start and another three at the end. You should change the title, author, and date to the values that suit you. Keep the `output` line as it is for now, however. Each line in the metadata has a structure. First the *key* ("title", "author", etc), then a colon, and then the *value* associated with the key.  

## This is an RMarkdown File

Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. A *code chunk* is a specially delimited section of the file. You can add one by moving the cursor to a blank line choosing Code > Insert Chunk from the RStudio menu. When you do, an empty chunk will appear:

```{r}


```

Code chunks are delimited by three backticks (found to the left of the 1 key on US and UK keyboards) at the start and end. The opening backticks also have a pair of braces and the letter `r`, to indicate what language the chunk is written in. You write your code inside the code chunks. Write your notes and other material around them, as here. 

## Before you Begin

To install the tidyverse, make sure you have an Internet connection. Then *manually* run the code in the chunk below. If you knit the document if will be skipped. We do this because you only need to install these packages once, not every time you run this file. Either knit the chunk using the little green "play" arrow to the right of the chunk area, or copy and paste the text into the console window.

```{r install, eval = FALSE}

## This code will not be evaluated automatically.
## (Notice the eval = FALSE declaration in the options section of the
## code chunk)

my_packages <- c("tidyverse", "broom", "coefplot", "cowplot",
                 "gapminder", "GGally", "ggrepel", "ggridges", "gridExtra",
                 "here", "interplot", "margins", "maps", "mapproj",
                 "mapdata", "MASS", "quantreg", "rlang", "scales",
                 "survey", "srvyr", "viridis", "viridisLite", "devtools")

install.packages(my_packages, repos = "http://cran.rstudio.com")

```

## Set Up Your Project and Load Libraries

To begin we must load some libraries we will be using. If we do not load them, R will not be able to find the functions contained in these libraries. The tidyverse includes ggplot and other tools. We also load the socviz and gapminder libraries.

```{r setup, include=FALSE}

## By defult, show code for all chunks in the knitted document,
## as well as the output. To override for a particular chunk
## use echo = FALSE in its options.
knitr::opts_chunk$set(echo = TRUE) 

## Set the default size of figures
knitr::opts_chunk$set(fig.width=8, fig.height=5)  

## Load the libraries we will be using
library(gapminder)
library(here)
library(socviz)
library(tidyverse)

```

Notice that here, the braces at the start of the code chunk have some additional options set in them. There is the language, `r`, as before. This is required. Then there is the word `setup`, which is a label for your code chunk. Labels are useful to briefly say what the chunk does. Label names must be unique (no two chunks in the same document can have the same label) and cannot contain spaces. Then, after the comma, an option is set: `include=FALSE`. This tells R to run this code but not to include the output in the final document. 


When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r look}
gapminder
```

The remainder of this document contains the chapter headings for the book, and an empty code chunk in each section to get you started. Try knitting this document now by clicking the "Knit" button in the RStudio toolbar, or choosing File > Knit Document from the RStudio menu.

## Objects

Loads the libraries "tidyverse" and "socviz" for working with data and having pre-existing data sets for the examples respectively, then creates two vectors (which are automatically objects in R as everything is an object in R) "my_numbers" and "your_numbers" using the "c" function. "c" stands for *concatenate* or *combine*, i.e. combining the individual numbers/values into one object, the vector.

```{r}

# load libraries
library(tidyverse)
library(socviz)

my_numbers <- c(1, 2, 3, 1, 3, 5, 25)
your_numbers <- c(5, 31, 71, 1, 2, 21, 6)

my_numbers

```


## Functions

Functions are used most in R and perform some kind of action on data. Functions take arguments and these arguments can either be inputted in the correct order or specifically assigned as shown below with the "mean" function. The outputs of functions can be assigned to variables for later use, as shown below with the "summary" function.

```{r}

mean(x = my_numbers)
my_summary <- summary(my_numbers)
my_summary

```


## Libraries

Libraries contain pre-made functions that can be used to derive your own functions and code.

```{r}

# simple table of counts of my_numbers
table(my_numbers)

# standard deviation of my_numbers
sd(my_numbers)

# multiply each value in my_numbers by 5
my_numbers * 5

# add 1 to each value in my_numbers
my_numbers + 1

# adds each element of my_numbers to the corresponding element in my_numbers (i.e. adds my_numbers to itself)
my_numbers + my_numbers

```


## Classes

Classes are the *kind* of object of an element of R. Certain kinds of objects can do certain things and, more importantly, *cannot* do certain things.

```{r}
# identifying the classes of previously used objects
class(my_numbers)

class(my_summary)

class(summary)

# observing the effects actions have on an object's class
my_new_vector <- c(my_numbers, "Apple")
my_new_vector

class(my_new_vector)
```

Data frames are a special type of class that, on a basic level, is similar to a table consisting of rows and columns (of observations and variables, respectively).

Tibbles are similar to data frames in that they store various types of variables in a single table of data. Tibbles contain more information about their contents than data frames.

```{r}

# data frame example
titanic
class(titanic)

# pick out a named column from the dataframe
titanic$percent

# convert a data frame into a tibble
titanic_tb <- as_tibble(titanic)
titanic_tb

```


## Structure

The structure of objects can vary from simple to complex. Thus, asking for the structure of an object can output too much information to the console if the structure is too complex.

```{r}

# see inside the my_numbers object
str(my_numbers)

# see inside the my_summary object
str(my_summary)

```

## Importing Data into R

Best to import data in "tidy" format using libraries from the "tidyverse" package.

```{r}

url <- "https://cdn.rawgit.com/kjhealy/viz-organdata/master/organdonation.csv"

organs <- read_csv(file = url)

```

## Plotting in R

```{r}

# load an example table of data
library(gapminder)
gapminder

# plot the gapminder data with labeled axes
p <- ggplot(data = gapminder, mapping = aes(x = gdpPercap, y = lifeExp))
p + geom_point()

```


